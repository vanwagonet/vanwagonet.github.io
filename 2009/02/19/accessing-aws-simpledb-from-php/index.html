<!doctype html>
<html><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Accessing AWS SimpleDB from PHP - Andy’s Scribbles</title><meta name="author" content="Andy VanWagoner"/><meta name="description" content="Andy’s Scribbles"/><link rel="icon" href="/assets/images/favicon.ico"/><link rel="alternative" type="application/atom+xml" title="RSS" href="atom.xml"/><link rel="stylesheet" href="/assets/css/style.css"/><header><h1><a href="https://andy.vanwago.net">Andy’s Scribbles <img class="logo" alt="Inkwell with angle brackets" src="/assets/images/favicon.svg"/></a></h1></header><main><div><article class="post" itemscope="" itemType="http://schema.org/BlogPosting"><h2 itemProp="headline"><a href="https://andy.vanwago.net/2009/02/19/accessing-aws-simpledb-from-php/" itemProp="url">Accessing AWS SimpleDB from PHP</a></h2><div class="meta"><time itemProp="datePublished" dateTime="2009-02-20T02:13:10.000Z">Feb 19, 2009</time> in <span><a class="category-link" href="/categories/distributed-system-design/">Distributed System Design</a></span></div><div itemProp="articleBody"><div><p>This week, as I built part of my App Server for Distributed Systems Design, I hit another stumbling block. The library that Amazon provides in PHP for accessing SimpleDB requires PHP 5.2. I should have known that I need to use the latest version.</p>
<p>Not only did Amazon’s library not work for me, but it was huge and complicated. I found another library at: <a href="http://code.google.com/p/simpledb-php/" target="_blank" rel="noopener">Google Code</a>, but as fate would have it, that library didn’t work either. The code was pretty ugly imho, but at least it was straighforward enough for me to understand how accessing SimpleDB worked, which led me to make my own SimpleDB client.</p>
<p>The script will work with any PHP 5, and doesn’t depend on anything that isn’t built in by default. I hope it is helpful to someone else. It would be really easy to add the SimpleDB requests I haven’t implemented yet.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;?php</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AWS_SimpleDB_Client v0.1 by Andy VanWagoner, distributed under the ISC licence.</span></span><br><span class="line"><span class="comment"> * Provides simple access to Amazon's SimpleDB from PHP 5.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2009, Andy VanWagoner</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Permission to use, copy, modify, and/or distribute this software for any</span></span><br><span class="line"><span class="comment"> * purpose with or without fee is hereby granted, provided that the above</span></span><br><span class="line"><span class="comment"> * copyright notice and this permission notice appear in all copies.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &amp;quot;AS IS&amp;quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></span><br><span class="line"><span class="comment"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span></span><br><span class="line"><span class="comment"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></span><br><span class="line"><span class="comment"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></span><br><span class="line"><span class="comment"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span></span><br><span class="line"><span class="comment"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></span><br><span class="line"><span class="comment"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AWS_SimpleDB_Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// AWS SimpleDB API Constants</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> $service_endpoint	= &amp;quot;sdb.amazonaws.com&amp;quot;;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> $api_version			= &amp;quot;<span class="number">2007</span><span class="number">-11</span><span class="number">-07</span>&amp;quot;;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> $timestamp_format	= &amp;quot;Y-m-d\TH:i:s.\\\\\Z&amp;quot;;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> $signature_version	= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> $user_agent = &amp;quot;AWS_SimpleDB_Client <span class="number">0.1</span> - Andy VanWagoner&amp;quot;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* Constructor</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $access			// your AWS &amp;quot;Access Key ID&amp;quot;</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $secret			// your AWS &amp;quot;Seceret Access Key&amp;quot;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">AWS_SimpleDB_Client</span><span class="params">($access, $secret)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&amp;gt;access_key = $access;</span><br><span class="line">		<span class="keyword">$this</span>-&amp;gt;secret_key = $secret;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - CreateDomain</span></span><br><span class="line"><span class="comment">	* <span class="doctag">NOTE:</span> This call will take a while (AWS says 10 seconds)</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $domain			// the domain to create</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">create_domain</span><span class="params">($domain)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'CreateDomain'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - DeleteDomain</span></span><br><span class="line"><span class="comment">	* <span class="doctag">NOTE:</span> This call will take a while (AWS says 10 seconds)</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $domain			// the domain to delete</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">delete_domain</span><span class="params">($domain)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'DeleteDomain'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - ListDomains</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $next = ''		// Optional - Sent as NextToken parameter</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $max = 100		// Optional - Sent as MaxNumberOfDomains</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;,</span></span><br><span class="line"><span class="comment">	* 				'DomainName'=&amp;gt;array('...', ...) [, 'NextToken'=&amp;gt;])</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">list_domains</span><span class="params">($next = <span class="string">''</span>, $max = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(<span class="string">'Action'</span> =&amp;gt; <span class="string">'ListDomains'</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($max &amp;gt; <span class="number">0</span> &amp;amp;&amp;amp; $max) <span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - PutAttributes</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $domain			// The domain the item is in</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $item			// The name of the item</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> array  $attributes		// array(array('Name'=&amp;gt;, 'Value'=&amp;gt; [, 'Replace'=&amp;gt;]), ...)</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">put_attributes</span><span class="params">($domain, $item, $attributes)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'PutAttributes'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain,</span><br><span class="line">			<span class="string">'ItemName'</span> =&amp;gt; $item</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">foreach</span>($attributes <span class="keyword">as</span> $i =&amp;gt; $value) &#123;</span><br><span class="line">			$params[&amp;quot;Attribute.$i.Name&amp;quot;] = $value[<span class="string">'Name'</span>];</span><br><span class="line">			$params[&amp;quot;Attribute.$i.Value&amp;quot;] = $value[<span class="string">'Value'</span>];</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">isset</span>($value[<span class="string">'Replace'</span>]))</span><br><span class="line">				$params[&amp;quot;Attribute.$i.Replace&amp;quot;] = $value[<span class="string">'Replace'</span>];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - DeleteAttributes</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $domain			// The domain the item is in</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $item			// The name of the item</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> array  $attributes		// array(array('Name'=&amp;gt;, 'Value'=&amp;gt;), ...)</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">delete_attributes</span><span class="params">($domain, $item, $attributes)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'DeleteAttributes'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain,</span><br><span class="line">			<span class="string">'ItemName'</span> =&amp;gt; $item</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">foreach</span>($attributes <span class="keyword">as</span> $i =&amp;gt; $value) &#123;</span><br><span class="line">			$params[&amp;quot;Attribute.$i.Name&amp;quot;] = $value[<span class="string">'Name'</span>];</span><br><span class="line">			$params[&amp;quot;Attribute.$i.Value&amp;quot;] = $value[<span class="string">'Value'</span>];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - GetAttributes</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $domain			// the domain name</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $item			// the item's name</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string $attribute		// Optional - If specified, only this attribute's values are retrieved.</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;,</span></span><br><span class="line"><span class="comment">	* 				'Attribute'=&amp;gt;array(array('Name'=&amp;gt;,'Value'=&amp;gt;), ...))</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">get_attributes</span><span class="params">($domain, $item, $attribute = <span class="string">''</span>)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'GetAttributes'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain,</span><br><span class="line">			<span class="string">'ItemName'</span> =&amp;gt; $item</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($attribute)</span><br><span class="line">			$params[<span class="string">'AttributeName'</span>] = $attribute;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* AWS SimpleDB API - Query</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string  $domain		// The domain name</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string  $query			// The query to run on this domain</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> string  $next = ''		// OPTIONAL - token supplied on last paged call</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> integer $max = 100		// OPTIONAL - max items you want returned 1-250, default = 100</span></span><br><span class="line"><span class="comment">	*</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;,</span></span><br><span class="line"><span class="comment">	* 				'ItemName'=&amp;gt;array('...', ...))</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">($domain, $query, $next = <span class="string">''</span>, $max = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">		$params = <span class="keyword">array</span>(</span><br><span class="line">			<span class="string">'Action'</span> =&amp;gt; <span class="string">'Query'</span>,</span><br><span class="line">			<span class="string">'DomainName'</span> =&amp;gt; $domain,</span><br><span class="line">			<span class="string">'QueryExpression'</span> =&amp;gt; $query</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($max &amp;gt; <span class="number">250</span>) $max = <span class="number">250</span>;</span><br><span class="line">		<span class="keyword">if</span> ($max &amp;gt; <span class="number">0</span>)</span><br><span class="line">			$params[<span class="string">'MaxNumberOfItems'</span>] = $max;</span><br><span class="line">		<span class="keyword">if</span> ($next)</span><br><span class="line">			$params[<span class="string">'NextToken'</span>] = $next;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;post($params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sign the parameters, following AWS version 1 signing</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> array $params			// array of all (except for the signiture) params to be passed to amazon</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> string				// signature string</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">sign</span><span class="params">($params)</span> </span>&#123;</span><br><span class="line">		uksort($params, <span class="string">'strnatcasecmp'</span>);</span><br><span class="line"></span><br><span class="line">		$data = <span class="string">''</span>;</span><br><span class="line">		<span class="keyword">foreach</span> ($params <span class="keyword">as</span> $key=&amp;gt;$value) &#123;</span><br><span class="line">			$data .= $key . $value;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> base64_encode (	pack(&amp;quot;H*&amp;quot;, sha1((str_pad(<span class="keyword">$this</span>-&amp;gt;secret_key, <span class="number">64</span>, chr(<span class="number">0x00</span>)) ^ (str_repeat(chr(<span class="number">0x5c</span>), <span class="number">64</span>))) .</span><br><span class="line">								pack(&amp;quot;H*&amp;quot;, sha1((str_pad(<span class="keyword">$this</span>-&amp;gt;secret_key, <span class="number">64</span>, chr(<span class="number">0x00</span>)) ^ (str_repeat(chr(<span class="number">0x36</span>), <span class="number">64</span>))) .</span><br><span class="line">								$data)))) );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * POST to AWS SimpleDB and then parse the response.</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> array $params			// all params to pass on the post</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> array('status'=&amp;gt;array('code'=&amp;gt;, 'message'=&amp;gt;), 'RequestId'=&amp;gt;, 'BoxUsage'=&amp;gt;, ...)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">post</span><span class="params">($params)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Add all of the common parameters needed by AWS SimpleDB</span></span><br><span class="line">		$params[<span class="string">'AWSAccessKeyId'</span>]	= <span class="keyword">$this</span>-&amp;gt;access_key;</span><br><span class="line">		$params[<span class="string">'Timestamp'</span>] 		= gmdate(<span class="keyword">self</span>::$timestamp_format, time());</span><br><span class="line">		$params[<span class="string">'Version'</span>] 			= <span class="keyword">self</span>::$api_version;</span><br><span class="line">		$params[<span class="string">'SignatureVersion'</span>]	= <span class="keyword">self</span>::$signature_version;</span><br><span class="line">		$params[<span class="string">'Signature'</span>] 		= <span class="keyword">$this</span>-&amp;gt;sign($params);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Generate the POST request</span></span><br><span class="line">		$content = http_build_query($params);</span><br><span class="line"></span><br><span class="line">		$post  = <span class="string">'POST / HTTP/1.0'</span>															. &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= <span class="string">'Host: '</span> 			. <span class="keyword">self</span>::$service_endpoint 								. &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= <span class="string">'Content-Type: '</span> 	. <span class="string">'application/x-www-form-urlencoded; charset=utf-8'</span>	. &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= <span class="string">'Content-Length: '</span> . strlen($content)										. &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= <span class="string">'User-Agent: '</span> 	. <span class="keyword">self</span>::$user_agent 									. &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= 																			  &amp;quot;\r\n&amp;quot;;</span><br><span class="line">		$post .= $content;</span><br><span class="line"></span><br><span class="line">		$socket = @fsockopen(<span class="keyword">self</span>::$service_endpoint, <span class="number">80</span>, $errno, $errstr, <span class="number">10</span>);</span><br><span class="line">  		<span class="keyword">if</span> ($socket) &#123;</span><br><span class="line">			fwrite($socket, $post);</span><br><span class="line"></span><br><span class="line">			$response = stream_get_contents($socket);</span><br><span class="line">			fclose($socket);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Parse the response</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">$this</span>-&amp;gt;format_result($response);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Return a fail result</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">array</span>(<span class="string">'status'</span> =&amp;gt; <span class="keyword">array</span>(<span class="string">'code'</span> =&amp;gt; <span class="number">404</span>, <span class="string">'message'</span> =&amp;gt; <span class="string">'Not Found'</span>),</span><br><span class="line">			<span class="string">'Error'</span> =&amp;gt; <span class="keyword">array</span>(<span class="string">'Code'</span> =&amp;gt; $errno, <span class="string">'Message'</span> =&amp;gt;</span><br><span class="line">				<span class="string">'Could not connect to '</span> . <span class="keyword">$this</span>-&amp;gt;$service_endpoint . &amp;quot; ($errstr)&amp;quot;</span><br><span class="line">			)</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Take the XML document returned by AWS SimpleDB, and transform it into a hash</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> string $result		// the full http response string from SimpleDB</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">format_result</span><span class="params">($result)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">list</span>($http_headers, $content) = explode(&amp;quot;\r\n\r\n&amp;quot;, $result, <span class="number">2</span>);</span><br><span class="line">		$header_lines = explode(&amp;quot;\r\n&amp;quot;, $http_headers);</span><br><span class="line">		<span class="keyword">list</span>($protocol, $code, $message) = explode(&amp;quot; &amp;quot;, $header_lines[<span class="number">0</span>], <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// record the http status</span></span><br><span class="line">		$formatted = <span class="keyword">array</span>(<span class="string">'status'</span> =&amp;gt; <span class="keyword">array</span>(<span class="string">'code'</span> =&amp;gt; $code, <span class="string">'message'</span> =&amp;gt; $message));</span><br><span class="line"></span><br><span class="line">		$xml = simplexml_load_string($content);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Look for Errors</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;Errors)) &#123;</span><br><span class="line">			$formatted[<span class="string">'RequestId'</span>] = (string)$xml-&amp;gt;RequestId;</span><br><span class="line">			$formatted[<span class="string">'Error'</span>] = <span class="keyword">array</span>();</span><br><span class="line">			<span class="keyword">foreach</span>($xml-&amp;gt;Errors-&amp;gt;Error <span class="keyword">as</span> $error) &#123;</span><br><span class="line">				array_push($formatted[<span class="string">'Error'</span>], <span class="keyword">array</span>(</span><br><span class="line">					<span class="string">'Code'</span> =&amp;gt; (string)$error-&amp;gt;Code,</span><br><span class="line">					<span class="string">'Message'</span> =&amp;gt; (string)$error-&amp;gt;Message</span><br><span class="line">				));</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> $formatted;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Get the metadata for this request</span></span><br><span class="line">		$metadata = $xml-&amp;gt;ResponseMetadata;</span><br><span class="line">		$formatted[<span class="string">'RequestId'</span>] = (string)$metadata-&amp;gt;RequestId;</span><br><span class="line">		$formatted[<span class="string">'BoxUsage'</span>] = (string)$metadata-&amp;gt;BoxUsage;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// GetAttributes Response</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;GetAttributesResult)) &#123;</span><br><span class="line">			$formatted[<span class="string">'Attribute'</span>] = <span class="keyword">array</span>();</span><br><span class="line">			<span class="keyword">foreach</span>($xml-&amp;gt;GetAttributesResult-&amp;gt;Attribute <span class="keyword">as</span> $attribute) &#123;</span><br><span class="line">				array_push($formatted[<span class="string">'Attribute'</span>], <span class="keyword">array</span>(</span><br><span class="line">					<span class="string">'Name'</span> =&amp;gt; (string)$attribute-&amp;gt;Name,</span><br><span class="line">					<span class="string">'Value'</span> =&amp;gt; (string)$attribute-&amp;gt;Value</span><br><span class="line">				));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ListDomains Response</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;ListDomainsResult)) &#123;</span><br><span class="line">			$formatted[<span class="string">'DomainName'</span>] = <span class="keyword">array</span>();</span><br><span class="line">			<span class="keyword">foreach</span>($xml-&amp;gt;ListDomainsResult-&amp;gt;DomainName <span class="keyword">as</span> $domain) &#123;</span><br><span class="line">				array_push($formatted[<span class="string">'DomainName'</span>], (string)$domain);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;ListDomainsResult-&amp;gt;NextToken)) &#123;</span><br><span class="line">				$formatted[<span class="string">'NextToken'</span>] = (string)$xml-&amp;gt;ListDomainsResult-&amp;gt;NextToken;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Query Response</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;QueryResult)) &#123;</span><br><span class="line">			$formatted[<span class="string">'ItemName'</span>] = <span class="keyword">array</span>();</span><br><span class="line">			<span class="keyword">foreach</span>($xml-&amp;gt;QueryResult-&amp;gt;ItemName <span class="keyword">as</span> $item) &#123;</span><br><span class="line">				array_push($formatted[<span class="string">'ItemName'</span>], (string)$item);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">isset</span>($xml-&amp;gt;QueryResult-&amp;gt;NextToken)) &#123;</span><br><span class="line">				$formatted[<span class="string">'NextToken'</span>] = (string)$xml-&amp;gt;QueryResult-&amp;gt;NextToken;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> $formatted;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&amp;gt;</span><br></pre></td></tr></table></figure>
</div></div><div class="post-footer"><div class="tags">Tagged in <span><a class="tag-none-link" href="/tags/aws/" rel="tag">AWS</a>, <a class="tag-none-link" href="/tags/amazon/" rel="tag">Amazon</a>, <a class="tag-none-link" href="/tags/amazon-com/" rel="tag">Amazon.com</a>, <a class="tag-none-link" href="/tags/simpledb/" rel="tag">SimpleDB</a>, <a class="tag-none-link" href="/tags/php/" rel="tag">php</a></span></div></div></article><nav class="pages"><a class="page prev" href="/2010/01/30/javascript-require-in-100-lines-of-code/" title="JavaScript require in 100 lines of code">Previous</a><a class="page next" href="/2009/02/04/json-and-post-in-php/" title="JSON and POST in PHP">Next</a></nav></div><footer>Copyright © 2021 Andy VanWagoner. All Rights Reserved.</footer></main><nav><a class="name" href="/about"><img class="avatar" src="/assets/images/andy.jpg"/>Andy VanWagoner</a><ul class="links"><li><a href="/"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d="M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"></path></svg>Home</a></li><li><a href="/faith"><svg class="icon" viewBox="-2 0 16 16" aria-hidden="true"><path d=" M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05 -1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08 -1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L 5.03.3l.02.01z "></path></svg>Faith</a></li><li><a href="/all-categories"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d="M4 2v14l5-5 5 5v-14zM12 0h-10v14l1-1v-12h9z"></path></svg>Categories</a></li><li><a href="/all-tags"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M15.25 0h-6c-0.412 0-0.989 0.239-1.28 0.53l-7.439 7.439c-0.292 0.292-0.292 0.769 0 1.061l6.439 6.439c0.292 0.292 0.769 0.292 1.061 0l7.439-7.439c 0.292-0.292 0.53-0.868 0.53-1.28v-6c0-0.412-0.338-0.75-0.75-0.75zM11.5 6c -0.828 0-1.5-0.672-1.5-1.5s0.672-1.5 1.5-1.5 1.5 0.672 1.5 1.5-0.672 1.5 -1.5 1.5z "></path></svg>Tags</a></li><li><a href="/archives"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M15.89 10.188l-4-5c-0.095-0.119-0.239-0.188-0.39-0.188h-7c-0.152 0-0.296 0.069-0.39 0.188l-4 5c-0.071 0.089-0.11 0.199-0.11 0.312v4.5c0 0.552 0.448 1 1 1h14c0.552 0 1-0.448 1-1v-4.5c0-0.114-0.039-0.224-0.11-0.312zM15 11h -3.5l-2 2h-3l-2-2h-3.5v-0.325l3.74-4.675h6.519l3.74 4.675v0.325zM11.5 8h-7 c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h7c0.276 0 0.5 0.224 0.5 0.5s -0.224 0.5-0.5 0.5zM12.5 10h-9c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5 -0.5h9c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z "></path></svg>Archives</a></li></ul><ul class="links"><li><a href="https://github.com/vanwagonet" target="_blank"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M8 0.198c-4.418 0-8 3.582-8 8 0 3.535 2.292 6.533 5.471 7.591 0.4 0.074 0.547-0.174 0.547-0.385 0-0.191-0.008-0.821-0.011-1.489-2.226 0.484-2.695 -0.944-2.695-0.944-0.364-0.925-0.888-1.171-0.888-1.171-0.726-0.497 0.055 -0.486 0.055-0.486 0.803 0.056 1.226 0.824 1.226 0.824 0.714 1.223 1.872 0.869 2.328 0.665 0.072-0.517 0.279-0.87 0.508-1.070-1.777-0.202-3.645 -0.888-3.645-3.954 0-0.873 0.313-1.587 0.824-2.147-0.083-0.202-0.357-1.015 0.077-2.117 0 0 0.672-0.215 2.201 0.82 0.638-0.177 1.322-0.266 2.002-0.269 0.68 0.003 1.365 0.092 2.004 0.269 1.527-1.035 2.198-0.82 2.198-0.82 0.435 1.102 0.162 1.916 0.079 2.117 0.513 0.56 0.823 1.274 0.823 2.147 0 3.073 -1.872 3.749-3.653 3.947 0.287 0.248 0.543 0.735 0.543 1.481 0 1.070-0.009 1.932-0.009 2.195 0 0.213 0.144 0.462 0.55 0.384 3.177-1.059 5.466-4.057 5.466-7.59 0-4.418-3.582-8-8-8z "></path></svg>GitHub</a></li><li><a href="http://stackoverflow.com/users/1701761/andy-vanwagoner" target="_blank"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M16 10v6h-16v-6h2v4h12v-4zM3 11h10v2h-10zM3.237 8.835l0.433-1.953 9.763 2.164-0.433 1.953zM4.37 4.821l0.845-1.813 9.063 4.226-0.845 1.813zM15.496 5.648l-1.218 1.587-7.934-6.088 0.88-1.147h0.91z "></path></svg>Stack Overflow</a></li><li><a href="https://www.linkedin.com/in/andrewvanwagoner" target="_blank"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M6 6h2.767v1.418h0.040c0.385-0.691 1.327-1.418 2.732-1.418 2.921 0 3.461 1.818 3.461 4.183v4.817h-2.885v-4.27c0-1.018-0.021-2.329-1.5-2.329-1.502 0 -1.732 1.109-1.732 2.255v4.344h-2.883v-9zM1 6h3v9h-3v-9zM4 3.5c0 0.828 -0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z "></path></svg>LinkedIn</a></li></ul><ul class="links"><li><a href="/atom.xml"><svg class="icon" viewBox="0 0 16 16" aria-hidden="true"><path d=" M2.13 11.733c-1.175 0-2.13 0.958-2.13 2.126 0 1.174 0.955 2.122 2.13 2.122 1.179 0 2.133-0.948 2.133-2.122-0-1.168-0.954-2.126-2.133-2.126zM0.002 5.436v3.067c1.997 0 3.874 0.781 5.288 2.196 1.412 1.411 2.192 3.297 2.192 5.302h3.080c-0-5.825-4.739-10.564-10.56-10.564zM0.006 0v3.068c7.122 0 12.918 5.802 12.918 12.932h3.076c0-8.82-7.176-16-15.994-16z "></path></svg>Feed</a></li></ul></nav></html>